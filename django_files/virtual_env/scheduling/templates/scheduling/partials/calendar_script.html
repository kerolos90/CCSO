<script>
  $(function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'today',
          center: 'title',
          right: 'prev,next'
        },
        events : {{colored_dates|safe}},

        dateClick: function(date) {
          $.ajax({
            url: "{{patrol_schedule}}",
            type: "POST",
            data: {date:date.dateStr, csrfmiddlewaretoken: '{{ csrf_token }}'},
            success: function(data){
              $('#other_body').empty();
              $("#table-to-refresh").replaceWith(data)

              htmx.process(document.body);
            }
          })
       
        }   
    });
    calendar.render();

    });
</script>
